// This file consists of the pseudocode grammar for Graphviz
//  Author: Randy Paredis
//  Date:   01/04/2020

// Discard Comments and whitespace
COMMENT_SNG: "//" /[^\n]/*
COMMENT_MLT: /\/\*[^*]*\*+(?:[^\/*][^*]*\*+)*\//
WS: /[ \t\f\r\n]/+

%ignore WS
%ignore COMMENT_SNG
%ignore COMMENT_MLT

start: stmts
stmts: stmt*
stmt: (state SEP?) | assign | ifthenelse | while
assign: (NAME (ASSIGN operation)+ SEP?) | ((INC | DEC | OPA) state) | (state OPA)
operation: state ((OP | MOD) state)*
?state: NAME | NUMERAL | string | BREAK | CONTINUE
?string: STRINGD | STRINGS
ifthenelse: IF condition THEN SEP? stmts elif* else? (FI | (END IF?))
// iftype: "[" (string | NAME) "," (string | NAME) "]"
condition: state ((TEST | IS | IN | AND | OR) state)* QM?
elif: (ELIF | (ELSE IF)) condition THEN SEP? stmts
else: ELSE stmts
while: WHILE condition DO SEP? stmts (DONE | (END WHILE?))


TEST: "<>" | "<=" | ">=" | "<" | ">" | "==" | "!=" | "&&" | "||"
OP: "+" | "-" | "*" | "/" | "%"
OPA: "++" | "--"

SEP: ";"
QM: "?"
ASSIGN: "=" | ":=" | "+=" | "-=" | "*=" | "%=" | "/="
IF: "if"i
THEN: "then"i
ELIF: "elif"i
ELSEIF: "elseif"i
ELSE: "else"i
FI: "fi"i
ENDIF: "endif"i
END: "end"i
WHILE: "while"i
DO: "do"i
DONE: "done"i
IS: "is"i
IN: "in"i
AND: "and"i
OR: "or"i
MOD: "mod"i
INC: "inc"i | "increment"i
DEC: "dec"i | "decrement"i
BREAK: "break"i
CONTINUE: "continue"i

NAME: /[a-zA-Z_][a-zA-Z0-9_]*/
STRINGD: "\"" /[^\"\\]*(?:\\.[^\"\\]*)*/ "\""
STRINGS: "'" /[^\'\\]*(?:\\.[^\'\\]*)*/ "'"
NUMERAL: /[-]?(\.[0-9]+|[0-9]+(\.[0-9]*)?)/

