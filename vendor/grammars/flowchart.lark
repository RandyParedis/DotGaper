// This file consists of the pseudocode grammar for Graphviz
//  Author: Randy Paredis
//  Date:   01/04/2020

// Discard Comments and whitespace
COMMENT_SNG: "//" /[^\n]/*
COMMENT_MLT: /\/\*[^*]*\*+(?:[^\/*][^*]*\*+)*\//
WS: /[ \t\f\r\n]/+

%ignore WS
%ignore COMMENT_SNG
%ignore COMMENT_MLT

start: stmts
stmts: stmt*
stmt: ifthenelse | state | assign
ifthenelse: IF condition THEN SEP? stmts elif* else? (FI | ENDIF | (END IF?))
condition: state
elif: (ELIF | ELSEIF | (ELSE IF)) condition THEN SEP? stmts
else: ELSE stmts
assign: NAME ASSIGN state
?state: (NAME | NUMERAL | STRINGD | STRINGS) SEP?


SEP: ";"
ASSIGN: "=" | "<-" | ":="
IF: "if"i
THEN: "then"i
ELIF: "elif"i
ELSEIF: "elseif"i
ELSE: "else"i
FI: "fi"i
ENDIF: "endif"i
END: "end"i

NAME: /[a-zA-Z_][a-zA-Z0-9_]*/
STRINGD: "\"" /[^\"\\]*(?:\\.[^\"\\]*)*/ "\""
STRINGS: "'" /[^\'\\]*(?:\\.[^\'\\]*)*/ "'"
NUMERAL: /[-]?(\.[0-9]+|[0-9]+(\.[0-9]*)?)/

