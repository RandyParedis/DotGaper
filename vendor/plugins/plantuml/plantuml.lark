// Discard Comments and whitespace
COMMENT_SNG: "'" /[^\n]/*
COMMENT_MLT: /\/'[^']*'+(?:[^\/'][^']*'+)*\//
WS: /[ \t\f\r\n]/+

%ignore WS
%ignore COMMENT_SNG
%ignore COMMENT_MLT

start: sequence
sequence: "@startuml" (message | participant)* "@enduml"
message: node arrow node COLON MESSAGE
participant: part_type ((node (AS ID)?) | (ID (AS node)?)) color order
part_type: ACTOR | BOUNDARY | CONTROL | ENTITY | DATABASE | COLLECTIONS
node: (QUOTE MESSAGE QUOTE) | ID
// Check in semantics that no spaces occur!
color: "#" COLOR_NAME (COLOR_SEP COLOR_NAME)?
order: ORDER INT

ID: /[a-zA-Z0-9_]/+
MESSAGE: /[^\n]/+
INT: /([1-9][0-9]*)|0/
COLON: ":"
QUOTE: "\""
BLEFT: "["
BRIGHT: "]"
AS: "as"
ORDER: "order"
ACTOR: "actor"
BOUNDARY: "boundary"
CONTROL: "control"
ENTITY: "entity"
DATABASE: "database"
COLLECTIONS: "collections"
COLOR_NAME: /[a-zA-Z]/+ | /[a-fA-F0-9]{8}/ | /[a-fA-F0-9]{6}/ | /[a-fA-F0-9]{3}/
COLOR_SEP: "|" | "/" | "-" | "\\"

// Arrows  (check for no spaces)
arrow: ((tail RHEAD) | (LHEAD tail) | (LHEAD tail RHEAD)) ("x" | "o")?
tail: "-" (BLEFT color BRIGHT)? "-"?
RHEAD: /[\/\\>]{1,2}/
LHEAD: /[\/\\<]{1,2}/
